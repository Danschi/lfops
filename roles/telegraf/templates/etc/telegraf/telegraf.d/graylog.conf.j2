# {{ ansible_managed }}
# 2023101701
{% if item['by_role'] | d() %}
# Generated by Ansible role: {{ item['by_role'] }}
{% endif %}

[[inputs.graylog]]
servers = [
  "http://localhost:9000/api/system/metrics/multiple",
]

metrics = [
  "jvm.threads.count",
  "jvm.memory.total.init",
  "jvm.memory.total.used",
  "org.graylog2.journal.size",
  "org.graylog2.journal.size-limit",
  "org.graylog2.buffers.input.size",
  "org.graylog2.buffers.input.usage",
  "org.graylog2.buffers.output.size",
  "org.graylog2.buffers.output.usage",
  "org.graylog2.buffers.process.size",
  "org.graylog2.buffers.process.usage",
  "org.graylog2.journal.append.1-sec-rate",
  "org.graylog2.journal.utilization-ratio",
  "org.graylog2.throughput.input.1-sec-rate",
  "org.graylog2.throughput.output.1-sec-rate"
]

username = "{{ item['username'] }}"
password = "token" # graylog expects the token as the username, and "token" as the password
