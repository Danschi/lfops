# {{ ansible_managed }}
# 2022110201
{% if item['by_role'] | d() %}
# Generated by Ansible role: {{ item['by_role'] }}
{% endif %}

# non-threaded server

# MaxConnectionsPerChild: maximum number of requests a server process serves
# MaxRequestWorkers: maximum number of server processes allowed to start
# MaxSpareServers: maximum number of server processes which are kept spare
# MinSpareServers: minimum number of server processes which are kept spare
# StartServers: number of server processes to start

# mpm_prefork_module
StartServers            {{ apache_httpd__mpm_prefork_start_servers | d(5) }}
MinSpareServers         {{ apache_httpd__mpm_prefork_min_spare_servers | d(5) }}
MaxSpareServers         {{ apache_httpd__mpm_prefork_max_spare_servers | d(10) }}
MaxRequestWorkers       {{ apache_httpd__mpm_prefork_max_request_workers | d(256) }}
MaxConnectionsPerChild  {{ apache_httpd__mpm_prefork_max_connections_per_child | d(0) }}

{% if apache_httpd__mpm_prefork_max_request_workers > 256 %}
# ServerLimit: Upper limit on configurable number of processes.
# This directive sets the maximum configured value for MaxRequestWorkers for the lifetime of
# the Apache httpd process.
# With the prefork MPM, use this directive only if you need to set MaxRequestWorkers higher
# than 256 (default). Do not set the value of this directive any higher than what you might
# want to set MaxRequestWorkers to.
ServerLimit             {{ apache_httpd__mpm_prefork_max_request_workers | d(256) }}
{% endif %}

{{ item['raw'] | d() }}
