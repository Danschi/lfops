# duplicity__swift_tenantname: ''
# duplicity__swift_login:
#   username: ''
#   password: ''
#
# duplicity__public_master_long_keyid: 'LLZGH2BITI2LRLJCLFWEAJQ93N6MWTKBARQDMYX5'
# duplicity__public_master_key: |-
#   -----BEGIN PGP PUBLIC KEY BLOCK-----
#   ...
#   -----END PGP PUBLIC KEY BLOCK-----

duplicity__backup_dest: 'swift://{{ duplicity__backup_dest_container|trim("/") }}'
duplicity__backup_dest_container: '{{ ansible_nodename }}'

duplicity__group_backup_sources: []
duplicity__host_backup_sources: []
duplicity__role_backup_sources:
  - '/backup'
  - '/etc'
  - '/home'
  - '/opt'
  - '/root'
  - '/var/spool/cron'

duplicity__combined_backup_sources: '{{
    duplicity__role_backup_sources +
    duplicity__group_backup_sources +
    duplicity__host_backup_sources
    | flatten
 }}'

duplicity__excludes:
  - '**/*.git*'
  - '**/*.svn*'
  - '**/*.temp'
  - '**/*.tmp'
  - '**/.cache'
  - '**/cache'
  - '**/log'

duplicity__loglevel: 'notice' # error, warning, notice, info, debug
duplicity__on_calendar: '*-*-* {{ duplicity__on_calendar_hour }}:{{ 45|random(seed=inventory_hostname) }}'
duplicity__on_calendar_hour: '23'
duplicity__retention_time: '30D' # days
duplicity__swift_authurl: 'https://swiss-backup02.infomaniak.com/identity/v3'
duplicity__swift_authversion: '3'
duplicity__timer_enabled: True


duplicity__python_venv__dependent_venvs:
  - name: 'duplicity'
    packages:
      - 'duplicity'
      - 'python-swiftclient'
      - 'python-keystoneclient'
    package_requirements:
      - 'gcc'
      - 'librsync-devel'
    exposed_binaries:
      - 'duplicity'
