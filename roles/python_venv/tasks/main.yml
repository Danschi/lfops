- block:

  - name: 'dnf -y install python3-virtualenv python3-devel'
    ansible.builtin.package:
      name:
        - 'python3-virtualenv'
        - 'python3-devel'
      state: 'present'

  # - name: 'Deploy /etc/systemd/system/python-venv-update.service'
  #   ansible.builtin.template:
  #     src: 'etc/systemd/system/python-venv-update.service.j2'
  #     dest: '/etc/systemd/system/python-venv-update.service'
  #     owner: 'root'
  #     group: 'root'
  #     mode: 0644

  # - name: 'Deploy /etc/systemd/system/python-venv-update.timer'
  #   ansible.builtin.template:
  #     src: 'etc/systemd/system/python-venv-update.timer.j2'
  #     dest: '/etc/systemd/system/python-venv-update.timer'
  #     owner: 'root'
  #     group: 'root'
  #     mode: 0644

  - name: 'mkdir -p /opt/python-venv'
    ansible.builtin.file:
      path: '/opt/python-venv'
      state: 'directory'
      mode: 0755

  - ansible.builtin.include_tasks: 'create-venv.yml'
    loop: '{{ python_venv__combined_venvs }}'
    loop_control:
      loop_var: 'venv'

  tags:
    - 'python_venv'
